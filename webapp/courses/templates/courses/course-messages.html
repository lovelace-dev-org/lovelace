{% extends 'courses/base.html' %}

{% load i18n %}
{% load static %}
{% load course_tags %}

{% block extra-static %}
  <script src="{% static 'courses/messaging.js' %}"></script>
{% endblock %}

{% block breadcrumb-links %}
  <li><a href="{% url 'courses:index' %}">{% trans 'Courses' %}</a></li>
  <div class="separator">»</div>
  <li>
    <a href="{% url 'courses:course' course instance %}">
      {{ course.name }}&nbsp;/&nbsp;{{ instance.name }}
    </a>
  </li>
  <div class="separator">»</div>
  <li>{% trans 'Course Messages' %}</li>
{% endblock %}

{% block page-content %}
  {% for msg in course_msgs %}
    <div class="item-header interactive" onclick="expand_next_div(this)">
      <span>{{ msg.title }}</span> <span class="light-text">({{ msg.created }})</span>
      <button type="button"
              class="staff-base-button right-float delete-button"
              onclick="messaging.remove_message(event, this)"
              data-url="{% url 'courses:remove_course_message' course instance msg.id %}"
              data-csrf="{{ csrf_token }}">X
      </button>
    </div>
    <div class="item-container collapsed">
      {% render_markup msg.content instance %}
    </div>
  {% endfor %}

  <div>
    {{ form|safe }}
  </div>
{% endblock %}

