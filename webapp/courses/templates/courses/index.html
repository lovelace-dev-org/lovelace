{% extends 'courses/base.html' %}
{% load static %}
{% load i18n %}
{% load course_tags %}

{% block page-title %}{% trans 'Available courses' %}{% endblock %}

{% block breadcrumb-links %}
  <li><a href="{% url 'courses:index' %}">{% trans 'Courses' %}</a></li>
{% endblock %}

{% block toc %}{% endblock %}

{% block page-content %}
{% if course_list %}
  <h1>{% trans 'Available courses' %}</h1>
  <ul>
    {% for course in course_list %}
      <li>
        <div>
          <div>
            {#<a href="{% url 'courses:course_instances' course %}">#}{{ course.name }}{#</a>#}
            {% if course.code %}â€“ {{ course.code }}{% endif %}
            {% if course.credits %}/ {{ course.credits }} {% trans 'credits' %}{% endif %}
          </div>
          {% if course.description %}<div>{{ course.description }}</div>{% endif %}
          <div>
            <ul>
              {% for instance in course.get_instances %}
                {% with request.user|enrolled:instance as enroll_status %}
                {% if instance.is_active or enroll_status == "ACCEPTED" or request.user.is_staff %}
                  <li>
                    <div>
                      <a href="{% url 'courses:course' course instance %}">{{ instance.name }}</a>
                    </div>
                    {% enroll_widget course instance enroll_status %}

                    {% comment %}
                    <div>
                      <span class="instance-userinfo">Your progress: </span>
                      <progress max="5" value="3" title="3/5 completed"></progress>
                    </div>
                    {% endcomment %}
                  </li>
                {% endif %}
                {% endwith %}
              {% endfor %}
            </ul>
          </div>
        </div>
      </li>
    {% endfor %}
  </ul>
{% else %}
  <p>{% trans 'No courses available!' %}</p>
{% endif %}
{% endblock %}
